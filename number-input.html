<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../property-mixins/range-mixin.html">
<link rel="import" href="../property-mixins/intl-number-format-mixin.html">
<link rel="import" href="../input-picker-pattern/form-element-mixin.html">

<script>
  /**
   * mixin to create a number-input
   *
   * @appliesMixin IntegerInputMixin
   *
   * @mixinFunction
   * @polymer
   */
  const NumberInputMixin = superClass => { // eslint-disable-line no-unused-vars

    return class extends RangeMixin(FormElementMixin(IntlNumberFormatMixin(superClass))) {  // eslint-disable-line no-undef

      constructor() {
        super();
        /**
         * IE & Edge ch-unit fix
         */
        this._chCorrection = window.navigator.userAgent.match(/Edge|Trident/g) ? 1.25 : 1;
      }

      static get template() {
        return `
          ${this.styleTemplate}
          ${this.contentTemplate}
        `;
      }

      static get styleTemplate() {
        return `
          <style>
            :host {
              display: inline-flex;
              box-sizing: content-box;
              padding: 0 !important;
            }
            :host(:focus) {
              outline: none;
            }
            :host([invalid]) #input,
            #input:invalid {
              @apply --input-invalid;
              @apply --number-input-invalid;
            }
            #input {
              font-family: inherit;
              font-size: inherit;
              font-weight: inherit;
              text-align: var(--number-input-allign, center);
              overflow: visible;
              box-sizing: content-box;
              border: none;
              outline: none;
              -webkit-background-clip: padding-box;
              background-clip: padding-box;
              border-color: transparent;
              line-height: 1;
              color: var(--number-input-color, var(--input-color, inherit));
              background: var(--number-input-background, var(--input-background, transparent));
              @apply --input-style;
              @apply --number-input;
            }
            #input::-webkit-input-placeholder,
            #input::placeholder {
              @apply --input-placeholder;
              @apply --number-input-placeholder;
            }
            #input:hover,
            #input:focus {
              outline: none;
              color: var(--number-input-focus-color, var(--input-focus-color, inherit));
              background: var(--number-input-focus-background, var(--input-focus-background, rgba(0,0,0,0.1)));
              @apply --input-focus;
              @apply --number-input-focus;
            }
            :host([disabled]) {
              color: var(--number-input-disabled-color, var(--input-disabled-color, inherit));
              background: var(--number-input-disabled-background, var(--input-disabled-background, inherit));
              @apply --input-disabled;
            }
            input::-moz-focus-inner {
              border-style: none;
              padding: 0;
            }
            input::-moz-focusring {
              border-width: 0;
              color: transparent;
              text-shadow: 0 0 0 var(--number-input-focus-color, var(--input-focus-color, #000));
            }
            input::-moz-selection {
              color: var(--number-input-color, var(--input-color, inherit));
              background: var(--number-input-background, var(--input-background, transparent));
            }
            input:focus::-moz-selection {
              color: var(--input-selection-color, inherit);
              background: var(--input-selection-background, rgba(255,255,255,0.2));
            }
            input::selection {
              color: var(--number-input-color, var(--input-color, inherit));
              background: var(--number-input-background, var(--input-background, transparent));
            }
            input:focus::selection {
              color: var(--input-selection-color, inherit);
              background: var(--input-selection-background, rgba(255,255,255,0.2));
            }
          </style>
        `;
      }

      static get contentTemplate() {
        return `
          <input id="input"
            type="tel"
            placeholder="[[placeholder]]"
            required="[[required]]"
            disabled="[[disabled]]">
        `;
      }

      static get properties() {
        return {
          /**
           * length to pad the string (with `0`) according to the total amount of numbers
           * @type {number}
           */
          padLength: {
            type: Number
          },

          /**
           * placeholder string
           * @type {string}
           */
          placeholder: {
            type: String,
            observer: '_computeMinWidth'
          },

          /**
           * disable autosizing
           * @type {boolean}
           */
          noAutoWidth: {
            type: Boolean,
            value: false,
            observer: '_noAutoWidthChanged'
          },

          /**
           * enables auto padding
           * @type {boolean}
           */
          autoPadding: {
            type: Boolean
          },

          /**
           * string value of the input
           * @type {string}
           */
          input: {
            type: String,
            notify: true,
            observer: '_inputChanged'
          },

          /**
           * always put the sign in the beginning
           * @type {string}
           */
          alwaysSign: {
            type: Boolean,
            observer: '_updateView'
          },

          /**
           * The formatting style to use. Possible values are "decimal" for plain number formatting, "currency" for currency formatting, and "percent" for percent formatting; the default is "decimal".
           * notice: min, max and step are not in percent (so e.g. if step is 0.01, it means that the step is 1%)
           */
          numberStyle: {
            type: String,
            value: 'decimal'
          },

          /**
           * if true the number will be grouped according to the locale.
           */
          useGrouping: {
            type: Boolean
          },

          /**
           * The currency to use in currency formatting. Possible values are the ISO 4217 currency codes, such as "USD" for the US dollar, "EUR" for the euro, or "CNY" for the Chinese RMB — see http://www.currency-iso.org/en/home/tables/table-a1.html. There is no default value; if the style is "currency", the currency property must be provided.
           */
          currency: {
            type: String
          },

          /**
           * How to display the currency in currency formatting. Possible values are "symbol" to use a localized currency symbol such as €, "code" to use the ISO currency code, "name" to use a localized currency name such as "dollar"; the default is "symbol".
           */
          currencyDisplay: {
            type: String
          },

          /**
           * start where to increment the value
           */
          startAt: {
            type: Number
          },

          /**
           * minimum character width of the input
           */
          minlength: {
            type: Number
          },

          /**
           * unit of the value
           * @type {string}
           */
          unit: {
            type: String
          },

          /**
           * minimum digits right to the decimal separator
           * @type {number}
           */
          _minimumFractionDigits: {
            type: Number,
            computed: '_computeMinimumFractionDigits(_step, min, max, numberStyle)'
          },


          /**
           * minimum digits left to the decimal separator to pad
           * @type {number}
           */
          _minimumIntegerDigits: {
            type: Number,
            // polymorphism bug in polymer
            computed: '_computeMinimumIntegerDigits(autoPadding, padLength, default, min, max, _step, numberStyle)'
          },

          /**
           * longest number-string of the given range
           * @type {number}
           */
          _longestStaticLength: {
            type: Number,
            computed: '_computeLongestStatic(minlength, alwaysSign, _minimumIntegerDigits, _minimumFractionDigits)',
            observer: '_updateView'
          },

          /**
           * number format options
           */
          _numberOptions: {
            type: Number,
            computed: '_computeNumberOptions(minimumIntegerDigits, minimumFractionDigits, useGrouping, numberStyle, currency, currencyDisplay, unit)'
          },

          /**
           * number format function
           */
          formatNumber: {
            type: Function,
            computed: '_computeFormatNumber(locale, _numberOptions, alwaysSign, unit)',
            observer: '_updateView'
          },

          /**
           * function to parse the input
           */
          parseNumber: {
            type: Function,
            computed: '_computeParseNumber(decimalSeparator, groupingSeparator, numberStyle)',
            observer: '_updateView'
          },

          /**
           * locale separator for local decimal values
           * @type {string}
           */
          decimalSeparator: {
            type: String,
            readOnly: true
          },

          /**
           * locale separator for grouping decimal values
           * @type {string}
           */
          groupingSeparator: {
            type: String,
            readOnly: true
          },

          /**
           * regular expression to detect the decimal separator
           * @type {RegExp}
           */
          _regExpDecimalSeparator: {
            type: RegExp,
            computed: '_computeRegExpDecimalSeparator(decimalSeparator)'
          },

          /**
           * regular expression to replace non-numeric parts of a number string
           * @type {RegExp}
           */
          _regExpNotInNumber: {
            type: RegExp,
            computed: '_computeRegExpNotInNumber(decimalSeparator)'
          }
        }
      }

      static get observers() {
        return [
          '_unitChanged(_numberOptions)'
        ]
      }

      connectedCallback() {
        super.connectedCallback();
        this.focus = this.focus.bind(this);
        this._stopIncrem = this._stopIncrem.bind(this);
        this._updateView = this._updateView.bind(this);
        this._checkKeycode = this._checkKeycode.bind(this);
        this._addEventListeners();
      }

      disconnectedCallback() {
        super.disconnectedCallback();
        this._removeEventListeners();
      }

      _addEventListeners() {
        this.addEventListener('focus', this.focus, false);
        this.addEventListener('contextmenu', this._stopIncrem, false);
        this.$.input.addEventListener('focus', this._updateView, false);
        this.$.input.addEventListener('blur', this._updateView, false);
        this.$.input.addEventListener('keydown', this._checkKeycode, false);
        this.$.input.addEventListener('keyup', this._stopIncrem, false);
      }

      _removeEventListeners() {
        this.removeEventListener('focus', this.focus, false);
        this.removeEventListener('contextmenu', this._stopIncrem, false);
        this.$.input.removeEventListener('focus', this._updateView, false);
        this.$.input.removeEventListener('blur', this._updateView, false);
        this.$.input.removeEventListener('keydown', this._checkKeycode, false);
        this.$.input.removeEventListener('keyup', this._stopIncrem, false);
      }

      _checkKeycode(e) {
        if (!e.target) {
          if (e && e.preventDefault) e.preventDefault();
          return;
        }
        // up or down key press
        const inc = (e.keyCode === 38) ? this._step : (e.keyCode === 40 ? -this._step : 0);
        if (inc !== 0) {
          this._startIncrem(inc);
          e.stopPropagation();
          return;
        }

        // enter & space
        if (e.keyCode === 13 || e.keyCode === 32) {
          this._updateView();
          return;
        }

        // esc
        if (e.keyCode === 27) {
          this._updateView();
          e.stopPropagation();
          this.blur();
          return;
        }
      }

      _startIncrem(step) {
        this._stopIncrem();
        this._increm(step);
        this._activeIncremJob = setInterval(() => {
          this._increm(step);
        }, 150);
      }

      _stopIncrem() {
        if (this._activeIncremJob) {
          clearInterval(this._activeIncremJob);
        }
      }

      _increm(step) {
        let value = this.parseNumber(this.$.input.value) + step;
        if (isNaN(value)) {
          if (!isNaN(this.startAt)) {
            this.value = this.startAt;
          } else if (!isNaN(this.default)) {
            this.value = this.default;
          } else {
            this.value = this.min < 0 ? 0 : this.min || 0;
          }
        } else if (this.noClamp) {
          // still clamp to step, when incrementing
          this.value = this._checkStep(this._checkValue(value, this.value), this._step);
        } else {
          this.value = this._checkValue(value, this.value);
        }
      }

      _computeMinimumIntegerDigits(autoPadding, padLength, def, min, max) {
        min = '' + (min || '');
        max = '' + (max || '');
        def = '' + (def || '');
        if (autoPadding) {
          return Math.max((padLength || 0), def.length, min.length, max.length);
        }
        if (padLength) {
          return Math.max(1, (padLength || 0));
        }
        return 1;
      }

      _computeLongestStatic(minlength, alwaysSign, minimumIntegerDigits) {
        return Math.max(minlength || 1, this._computeChWidth((!alwaysSign && (this.min < 0 || this.max < 0) ? '-' : '') + this.formatNumber(Math.pow(10, minimumIntegerDigits - 1))));
      }

      // approximation of the ch-width of a number-string
      _computeChWidth(str) {
        if (str === undefined) {
          return 0;
        }
        return str.replace(/\D/g, '').length + str.replace(/[^+\\/?~_]/g, '').length + str.replace(/[^.,;\-*!(){}®«»¤±[\]'"´‹›`²³°\u2070-\u209C]/g, '').length / 2;
      }

      // approximation of the width of a string
      _computeEmWidth(str) {
        if (str === undefined) {
          return 0;
        }
        return str.replace(/[\d\s+\\/?~_^.,¤;\-*!(){}®«»±[\]'"´‹›`²³°\u2070-\u209C]/g, '').length + str.replace(/[^%#&$€£¥§©\u20A0-\u20CF]/g, '').length * 0.75 + str.replace(/\S/g, '').length / 4;
      }

      _computeMinWidth(placeholder) {
        placeholder = '' + (placeholder || '');
        this.$.input.style.minWidth = `calc(${this._computeEmWidth(placeholder)}em + ${this._computeChWidth(placeholder)}ch)`;
      }

      _computeInvalid(required, value) {
        this.invalid = required && isNaN(value);
      }

      _inputChanged(input) {
        if (!input) {
          if (!isNaN(this.default)) {
            this.input = '' + this.default;
          } else {
            this.$.input.value = '';
          }
          return;
        }
        const value = this._checkValue(this.parseNumber(input), this.value);
        input = this.formatNumber();

        if (this.input !== input) {
          this.input = input;
          return;
        }

        this.$.input.value = this.formatValue(input);
        this.value = value;

        this._debouncedComputeWidth(input);
      }


            _inputChanged(input, oldinput) {
              if (!input) {
                if (!isNaN(this.default)) {
                  this.input = '' + this.default;
                } else {
                  this.$.input.value = '';
                }
                return;
              }
              oldinput = oldinput || '';

              let newValue, oldValue, value;

              if (this.numberStyle === 'percent') {
                newValue = parseFloat(this._safeMult(input.replace(this._regExpNotInNumber, '').replace(this._regExpDecimalSeparator, '.'), 0.01));
                oldValue = parseFloat(this._safeMult(oldinput.replace(this._regExpNotInNumber, '').replace(this._regExpDecimalSeparator, '.'), 0.01));
              } else {
                newValue = parseFloat(input.replace(this._regExpNotInNumber, '').replace(this._regExpDecimalSeparator, '.'));
                oldValue = parseFloat(oldinput.replace(this._regExpNotInNumber, '').replace(this._regExpDecimalSeparator, '.'));
              }
              if (isNaN(oldValue)) {
                value = this._checkValue(newValue);
              } else {
                value = this._checkValue(newValue, oldValue);
              }

              input = this.formatNumber(value);

              if (this.input !== input) {
                this.input = input;
                return;
              }

              this.$.input.value = input + (this.unit ? ('\u202F' + this.unit) : '');
              this.value = value;
            }

      _valueChanged(value, oldValue) {
        if (value === undefined) {
          if (!isNaN(this.default)) {
            this.value = this.default;
          } else {
            this.input = undefined;
          }
          return
        }

        if (isNaN(oldValue)) {
          value = this._checkValue(value);
        } else {
          value = this._checkValue(value, oldValue);
        }

        if (this.value !== value) {
          this.value = value;
          return;
        }
        this.input = this.$.input.value = this.formatNumber(value);
      }

      _updateView(e) {
        this._inputChanged(this.$.input.value, this.input);
        this._debouncedComputeWidth(this.input);
        e && e.stopPropagation && e.stopPropagation();
      }

      _debouncedComputeWidth(input) {
        if (this._activeResizeJob) {
          cancelAnimationFrame(this._activeResizeJob);
        }
        this._activeResizeJob = requestAnimationFrame(this._computeWidth.bind(this, input));
      }

      _computeWidth(input) {
        if (this.noAutoWidth) return;

        input = input || '';

        const currLength = this._computeChWidth(input);
        const length = Math.max(this._longestStaticLength, currLength) * this._chCorrection;

        this.$.input.style.width = `${length}ch`;
      }

      _noAutoWidthChanged(noAutoWidth) {
        if (!noAutoWidth) {
          this._debouncedComputeWidth(this.input);
          return;
        }
        this.$.input.style.width = '';
      }

      /**
       * focus the input
       */
      focus() {
        this.$.input.focus();
        if (this.$.input.scrollIntoViewIfNeeded) {
          this.$.input.scrollIntoViewIfNeeded();
        }
      }

      /**
       * focus the input
       */
      blur(e) {
        this.$.input.blur();
        e && e.stopPropagation && e.stopPropagation();
      }

      _computeNumberOptions(minimumIntegerDigits, minimumFractionDigits, useGrouping, style, currency, currencyDisplay) {
        let options = {
          minimumIntegerDigits: minimumIntegerDigits || 1,
          minimumFractionDigits: minimumFractionDigits || 0,
          useGrouping: Boolean(useGrouping),
          style: style || 'decimal'
        }
        if (currency !== undefined) {
          options.currency = currency;
        }
        if (currencyDisplay !== undefined) {
          options.currencyDisplay = currencyDisplay;
        }
        return options;
      }

      _computeFormatNumber(locale, numberOptions, alwaysSign, unit) {
        console.log(locale,numberOptions);
        if (numberOptions && numberOptions.style === 'currency' && !numberOptions.currency) {
          console.warn('No currency is given. Using number style: \'decimal\'.');
          numberOptions.style = 'decimal';
        }
        const format = new Intl.NumberFormat(locale, numberOptions).format;
        return (n) => {
          return ((this.alwaysSign && n > 0) ? '+' : '') + format(n) + (this.unit ? ('\u202F' + this.unit) : '');
        }
      }

      _computeParseNumber(decimalSeparator, groupingSeparator, numberStyle) {
        if (this.numberStyle === 'percent') {
          return (input) => {
            return this._safeMult(parseFloat(input.replace(decimalSeparator, '.').replace(groupingSeparator, '')), 0.01);
          }
        }
        return (input) => {
          return parseFloat(input.replace(decimalSeparator, '.').replace(groupingSeparator, ''));
        }
      }

      _computeFormatValue(formatNumber, unit) {
        if (unit) {

        }
      }

      _computeMinimumFractionDigits(step, min, max, numberStyle) {
        if (numberStyle === 'percent') {
          min = this._safeMult(min || 0, 100);
          max = this._safeMult(max || 0, 100);
          step = this._safeMult(step || 0.01, 100);
        }

        min = '' + (Math.abs(min) || '');
        max = '' + (Math.abs(max) || '');
        step = '' + step;

        return ['0', step, min, max].reduce( (acc, curr) => {
          const pos = curr.indexOf('.');
          return Math.max((pos < 0) ? 0 : (curr.length - 1 - pos), acc);
        });
      }

      _computeMinimumIntegerDigits(autoPadding, padLength, def, min, max, step, numberStyle) {
        if (numberStyle === 'percent') {
          min = Math.round(min * 100);
          max = Math.round(max * 100);
          def = Math.round(def * 100);
          step = Math.round(step * 100);
        } else {
          min = Math.round(min);
          max = Math.round(max);
          def = Math.round(def);
          step = Math.round(step);
        }
        min = '' + (Math.abs(min) || 0);
        max = '' + (Math.abs(max) || 0);
        def = '' + (Math.abs(def) || 0);
        step = '' + (Math.abs(step) || 0);

        if (autoPadding) {
          return Math.max((padLength || 1), step.length, def.length, min.length, max.length);
        }
        return padLength || 1;
      }

      _computeLongestStatic(minlength, alwaysSign, minimumIntegerDigits, minimumFractionDigits) {
        return Math.max(minlength || 1, this._computeChWidth((!alwaysSign && (this.min < 0 || this.max < 0) ? '-' : '') + this.formatNumber(Math.pow(10, minimumIntegerDigits - 1) + Math.pow(10, -(minimumFractionDigits || 0)))));
      }

      _computeRegExpDecimalSeparator(decimalSeparator) {
        return new RegExp('\\' + decimalSeparator, 'g');
      }

      _computeRegExpNotInNumber(decimalSeparator) {
        return new RegExp('[^\\d-+\\' + decimalSeparator + ']', 'g');
      }

      _unitChanged() {
        if (this.numberStyle !== 'decimal') {
          let numberOptions = this._numberOptions;
          console.log(numberOptions);
          if (numberOptions && numberOptions.style === 'currency' && !numberOptions.currency) {
            console.warn('No currency is given. Using number style: \'decimal\'.');
            numberOptions.style = 'decimal';
          }
          const test = (1).toLocaleString(this.locale, numberOptions).replace(this.decimalSeparator, '').replace(/\d/g, '');
          this._unitEmLength = test.replace(/\S/g, '').length/4 + test.replace(/\s/g, '').length;
          this._unitChLength = 0;
          console.log(test, this._unitEmLength, this._computeEmWidth(test));
          if (this.unit !== '') {
            this.unit = '';
            return;
          }
        } else if (this.unit === '%') {
          this.unit = '';
          return;
        } else {
          if (this.value !== undefined) {
            this.$.input.value = this.formatNumber(this.value) + (this.unit ? ('\u202F' + this.unit) : '');
          }
          this._unitEmLength = (this._computeEmWidth(this.unit) || 0) + 0.125;
          this._unitChLength = (this._computeChWidth(this.unit) || 0) * this._chCorrection;
        }
        this._updateView();
      }

      _valueChanged(value, oldValue) {
        if (value === undefined) {
          if (!isNaN(this.default)) {
            this.value = this.default;
          } else {
            this.input = undefined;
          }
          return
        }

        if (isNaN(oldValue)) {
          value = this._checkValue(value);
        } else {
          value = this._checkValue(value, oldValue);
        }

        if (this.value !== value) {
          this.value = value;
          return;
        }
        const input = this.formatNumber(value);

        this.$.input.value = input + (this.unit ? ('\u202F' + this.unit) : '');
        this.input = input;
      }

      _increm(step) {
        let value = parseFloat(this.$.input.value.replace(this._regExpNotInNumber, '').replace(this._regExpDecimalSeparator, '.'));
        let input;
        if (isNaN(value)) {
          if (!isNaN(this.startAt)) {
            input = this.startAt;
          } else if (!isNaN(this.default)) {
            input = this.default;
          } else {
            input = (this.min < 0 ? 0 : this.min || 0);
          }
        } else if (this.numberStyle === 'percent') {
          input = this._safeAdd(this._safeMult(value, 0.01), step);
        } else {
          input = this._safeAdd(value, step);
        }
        if (this.noClamp) {
          // still clamp to step, when incrementing
          this.value = this._checkStep(this._checkValue(input, this.value), this._step);
        } else {
          this.value = this._checkValue(input, this.value);
        }
      }

      _computeWidth(input) {
        if (this.noAutoWidth) return;

        input = input || '';

        const currLength = this._computeChWidth(input);
        const length = Math.max(this._longestStaticLength, currLength) * this._chCorrection;

        if (this.unit !== undefined) {
          this.$.input.style.width = `calc(${length + this._unitChLength}ch + ${this._unitEmLength}em)`;
        } else {
          this.$.input.style.width = `${length}ch`;
        }
      }

      _stepChanged(step, stepMod) {
        if (!step) {
          this.step = 1;
          return;
        } else if (step !== Math.abs(step)) {
          this.step = Math.abs(step);
          return;
        }
        this._step = this._safeMult(step, stepMod || 1);
        this._updateValue();
      }

      // formatNumber() {
      //   const n = arguments[0];
      //   let str = '' + Math.abs(n);
      //   const decimalR = str.slice(str.indexOf('.')).length - 1;
      //   let decimalL = str.length - decimalR - 1;
      //   if (decimalR === 0) {
      //     decimalL++;
      //     if (this.minimumFractionDigits > 0) {
      //       str += '.';
      //     }
      //   }
      //   for (let i = 0; i < this.minimumFractionDigits - decimalR; i++) {
      //     str += '0';
      //   }
      //   for (let i = 0; i < this.minimumIntegerDigits - decimalL; i++) {
      //     str = '0' + str;
      //   }
      //   if (this.decimalSeparator !== '.') {
      //     str = str.replace('.', this.decimalSeparator || '.');
      //   }
      //   if (n < 0) {
      //     str = '-' + str;
      //   } else if (this.alwaysSign) {
      //     str = '+' + str;
      //   }
      //   return str;
      // }
    }
  }

</script>

<dom-module id="number-input">
  <script>
    /**
     *  `number-input` is an element that can:
     * * prevent non numeric input
     * * guarantee **live**-data to be valid
     * * pad a value with `0` (to a specific length)
     * * size the input (according to it's length)
     * * overflow to minimum or underflow to maximum
     * * saturate to minimum or to maximum
     * * display a specified unit and size the input
     * * specify the decimal separator (the value will still be a Number object)
     * * use percent-format
     *
     * Example:
     * ```html
     * <number-input step="2" min="-20" max="140" pad-length="2"></number-input>
     * ```
     *
     * It sizes automatically. Use `key-up` and `key-down` to increment the value. If `step` is given, the value is a **multiple** of `step`.
     *
     * ### Styling
     * Custom property                   | Description                                  | Default
     * ----------------------------------|----------------------------------------------|--------------------
     * `--number-input`                  | style of the input                           | {}
     * `--number-input-focus`            | style of the focussed and hovered input      | {}
     * `--number-input-placeholder`      | style of the placeholder                     | {}
     * `--number-input-color`            | color of the input                           | inherit
     * `--number-input-background`       | background of the input                      | inherit
     * `--number-input-focus-color`      | color of the focussed and hovered input      | inherit
     * `--number-input-focus-background` | background of the focussed and hovered input | rgba(0,0,0,0.1)
     * `--number-input-disabled-color`   | color of the disabled input                  | inherit
     *
     * ```css
     * :host {
     *   --number-input-disabled-color: grey;
     *   --number-input-focus-background: rgba(0,0,0,0.25);
     *   --number-input-focus: {
     *     font-weight: bold;
     *   };
     *   --number-input-placeholder: {
     *     color: pink;
     *   };
     * }
     * ```
     * @polymer
     * @customElement
     *
     * @appliesMixin NumberInputMixin
     *
     * @demo demo/index.html
     * @demo demo/form.html Form Demo
     **/
    class NumberInput extends NumberInputMixin(Polymer.Element) {  // eslint-disable-line no-undef

      static get is() {
        return 'number-input';
      }
    }
    window.customElements.define(NumberInput.is, NumberInput);
  </script>
</dom-module>
